# Алгоритм

У нас есть 128 символов для шифровки чисел от 1 до 300. Однозначные и двузначные числа можно шифровать одним символом, ASCII-код которого, совпадает с самим числом. Трехзначные числа можно разбить на 2 символа - левый отвечает за количество сотен, правый за десятки и единицы вместе. Таким образом мы экономим 1 символ при работе с двузначными и трехзначными числами. Также мы можем не использовать символ-разделитель, так как для сотенной и остальной части числа используются разные наборы символов.

Это решение можно улучшить, если заметить, что числа, которые встречаются больше одного раза, можно записать в виде пары ключ-значение, где ключ - это число, а значение - количество его появлений в массиве. Тогда эти данные можно записывать в строку блоками по 2 числа (ключ и значение), разделитель всё так же не нужен.

Можно заметить, что это улучшение работает только в том случае, если число повторяется больше 2 раз. Если число встречается только один раз, то мы используем лишний символ (единица, как количество появлений). Если два раза, то мы все равно записываем два числа (ключ-значение), как и в прошлой версии (просто два этих числа).

Отсюда следует, что можно сгруппировать все уникальные числа в массиве по количеству их появлений в массиве. Например, для массива [1, 2, 2, 3, 4, 4] можно сделать группировку: {1: [1, 3], 2: [2, 4]}. Это значит, что числа 1 и 3 появляются 1 раз, а числа 2 и 4 - 2 раза. Тогда при сжатии можно записывать эту информацию по блокам, где каждый блок - информация про элементы с одинаковым количеством появлений в массиве. Первое число блока - это количество повторений. Остальные числа блока - уникальные элементы массива. Для различения блоков нужно использовать символ-разделитель.

# Тесты

Тестирование на случайных массивах случайной длины (100000 итераций) показало более 75% коэффициента сжатия.

В папке tests находятся текстовые файлы с тестовыми данными. Каждый файл состоит из трех частей. Первая часть - одно дробное число типа double - коэффициент сжатия для данного теста. Далее следует символ перехода на новую строку. Вторая часть - массив в виде строки, как если бы не было сжатия (перечисление элементов через запятую). Далее следует символ перехода на новую строку. Третья часть - сжатая строка для сериализованного массива. Строка может содержать символы перехода на новую строку.